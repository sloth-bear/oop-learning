# bank-transaction-parser

## Goals
- SRP 
- Loose coupling
- High cohesion

## Usages
### Test coverage
```
./gradlew clean test jacocoTestReport && open "build/jacocoHtml/index.html"
```

## 요구사항
매달 은행에서 받는 입출금 내역으로 소비 내역을 자동으로 요약해주는 프로그램을 작성한다.

1. 입출금 내역은 csv 파일로 구성되어있으며, 예시는 아래와 같다. 구분자는 콤마`,`로 한정한다. 
```
30-01-2022,-100000,Deliveroo
30-01-2022,-50000,Tesco
01-02-2022,6000000,Salary
02-02-2022,2000000,Royalties
02-02-2022,-400000,Rent
03-02-2022,300000,Tesco
05-02-2022,-30000,Cinema
```

2. 구현되어야 하는 기능은 아래와 같다.
* 은행 입출금 내역의 총 수입과 총 지출은 각각 얼마인가? 결과가 양수인가 음수인가?
* 특정 달엔 몇 건의 입출금 내역이 발생했는가?
* 지출이 가장 높은 상위 10건은 무엇인가?
* 돈을 가장 많이 소비하는 항목은 무엇인가? 


## Concepts
### KISS`Keep It Short and Simple` 원칙
* 첫 시작을 짧고 간단하게 시작하는 원칙이다. 응용프로그램 코드를 한 개의 클래스로 처음엔 구현한다. 

### final 변수 
* 코드에서 가능한 많은 변수를 final로 표시하면 어떤 객체의 상태가 바뀔 수 있고, 어떤 객체의 상태가 바뀔 수 없는지 명확하게 구분할 수 있다. 
* final 키워드를 적용한다고 해서 객체가 바뀌지 못하도록 강요하는 것은 아니다. 가변 상태`mutable state`를 포함하기 때문이다. 

### got class
* 한 개의 파일에 모든 코드를 구현하다 보면 결국 하나의 거대한 클래스가 탄생하면서 클래스의 목적이 무엇이 이해하기 어려워진다. 코드 수정이 필요할 때, 어떻게 해당하는 로직을 찾아서 바꿀 수 있을까? 이런 문제를 `got class anti pattern`이라 부른다. 
* 쉽게 이해하고 유지보수할 수 있는 코드를 구현하는 데 도움을 주는 SRP 원칙을 활용해 리팩토링 할 수 있다.

### SRP`Single reponsibility principle`
* 단일 책임 원칙으로, 쉽게 관리하고 유지보수하는 코드를 구현하는 데 도움을 주는 포괄적인 소프트웨어 개발 지침이다. 
* 다음 두 가지를 보완하기 위해 SRP를 적용한다. 
  - 한 클래스는 한 기능만 책임진다. 
  - 클래스가 바뀌어야 하는 이유는 오직 하나여야 한다.
* 본 프로젝트에서는 아래와 같이 분리한다.
  - 입력 읽기
  - 주어진 형식의 입력 파싱 
  - 결과 처리
  - 결과 요약 리포트 

### 응집도
* 응집도는 코드 품질과 관련된 특성으로, 서로 어떻게 관련되어 있는지를 가리킨다.
* 소프트웨어의 복잡성을 유추하는 데 도움을 준다. 
* 클래스 수준의 응집도는 일반적으로 다음 여섯 가지 방법으로 그룹화한다.

| 응집도 수준       | 장점              | 단점                        | 예시                                                         |
|--------------|-----------------|---------------------------|------------------------------------------------------------|
| 기능(높은 응집도)   | 이해하기 쉬움         | 너무 단순한 클래스 생성             | `Parser` class: parse 기능 모음                                |
| 정보(중간 응집도)   | 유지보수하기 쉬움       | 불필요한 디펜던시                 | 같은 데이터나 도메인 객체 처리(ex: `DAO` class)                         |
| 순차(중간 응집도)   | 관련 동작을 찾기 쉬움    | SRP 위배할 수 있음              | 입출력이 순차적으로 흐르는 것 ex)Main method 내 로직들(method로 분리되어있다 하더라도) |
| 논리(중간 응집도)   | 높은 수준의 카테고리화 제공 | SRP 위배할 수 있음              | `Parser` 내 csv, json 등의 method가 포함되어있다면 '파싱'이라는 논리로 그룹화된 것 |
| 유틸리티(낮은 응집도) | 간단히 추가 가능       | 클래스의 책임을 파악하기 어려움 - 자제 필요 | 관련성 없는 메서드를 한 클래스로 포함, 만능 클래스                              |
| 시간(낮은 응집도)   | 판단 불가           | 각 동작을 이해하고 사용하기 어려움       | 시간과 관련된 연산 그룹화 - 전후 초기화, 뒷정리 작업(ex: DB Connection 연결 종료)   |


### 

## Recap
* got class, 중복은 코드를 추론하고 유지보수하기 어렵게 만든다. 
* SRP: 관리하고 유지보수하기 쉬운 코드를 구현하는 데 도움을 준다. 
* 응집도: 클래스, 메서드의 책임이 얼마나 강하게 연관되어 있는지를 가리킨다.
* 결합도: 클래스가 다른 코드 부분에 얼마나 의존하고 있는지를 가리킨다. 
* 높은 응집도와 낮은 결합도는 유지보수가 가능한 코드가 가져야 할 특징이다. 
* 자동화된 테스트 스위트는 소프트웨어가 올바로 동작하며, 코드를 수정해도 잘 동작할 것임을 확신할 수 있고 프로그램을 쉽게 이해할 수 있도록 도움을 준다. 
* 자바 테스트 프레임워크 - Junit 활용으로 메서드와 클래스의 동작을 테스트하는 유닛 테스트를 만든다. 
* 테스트를 쉽게 이해할 수 있도록 Given-When-Then 패턴으로 유닛 테스트를 세 부분으로 분리하는 것이 좋다. 

